<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Temperature, Heat & Expansion</title>
<meta name="description" content="Comprehensive Thermal Physics learning hub: theory, 20 expanded conceptual questions, 20 hard numericals with full solutions, 20 MCQs with timer, summary analytics, and key facts."/>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800&display=swap" rel="stylesheet">
<style>
html{scroll-behavior:smooth}
body{font-family:'Poppins',sans-serif;font-weight:500;background:#000;color:#d1d5db}
mark{background:#facc15;color:#000;font-weight:600;padding:0 .18em;border-radius:4px}
h1,h2,h3{letter-spacing:.5px}
h1{font-weight:800}
h2{font-weight:700}
h3{font-weight:600}
p{line-height:1.55}
.concept-card{transition:box-shadow .3s,transform .3s}
.concept-card:hover{box-shadow:0 8px 28px -6px rgba(0,0,0,.55),0 0 0 1px rgba(255,255,255,0.05);transform:translateY(-4px)}
.q-block,details.q-block{background:#111827;border:1px solid #374151;border-radius:20px;padding:1.05rem 1.2rem;position:relative}
.q-block:hover{border-color:#4b5563}
.q-number{font-weight:700;color:#60a5fa;margin-right:.55rem}
details summary{cursor:pointer;list-style:none;font-weight:600;display:flex;align-items:flex-start;gap:.4rem}
details summary::-webkit-details-marker{display:none}
details[open]{border-color:#475569}
.answer{margin-top:.7rem;font-size:.9rem;line-height:1.45;color:#cbd5e1}
.tag{background:#1f2937;padding:.15rem .55rem;border-radius:999px;font-size:.6rem;letter-spacing:.6px;font-weight:600;color:#93a2b8}
.badge-new{background:#2563eb;color:#fff;font-size:.55rem;padding:.25rem .55rem;border-radius:6px;font-weight:600}
.formula{font-weight:600;letter-spacing:.5px}
.chip{font-weight:600;letter-spacing:.3px}
footer p{color:#9ca3af}
::selection{background:#2563eb;color:#fff}
.section-anchor{position:sticky;top:0;background:linear-gradient(to right,#111827,#0f172a);padding:.65rem 1rem;z-index:40;display:flex;flex-wrap:wrap;gap:.85rem;border-bottom:1px solid #1f2937}
.section-anchor a{font-size:.72rem;letter-spacing:.55px;font-weight:600;background:#1e293b;padding:.38rem .75rem;border-radius:999px;color:#93c5fd;transition:.25s}
.section-anchor a:hover{background:#2563eb;color:#fff}

.problem-header{font-weight:600;font-size:1.02rem;display:flex;flex-wrap:wrap;gap:.5rem}
.solution-steps{margin-top:.8rem;background:#0f172a;border:1px solid #1e293b;border-radius:16px;padding:.95rem 1.05rem}
.solution-steps h4{font-size:.72rem;text-transform:uppercase;letter-spacing:.7px;color:#38bdf8;margin-bottom:.35rem}
.solution-steps ol{list-style:decimal;margin-left:1.15rem}
.solution-steps li{margin-bottom:.55rem;line-height:1.45}
.final-answer{background:#1e293b;padding:.55rem .8rem;border-radius:10px;font-weight:600;color:#34d399;display:inline-block;margin-top:.4rem}
.diff{font-size:.58rem;font-weight:700;letter-spacing:.7px;padding:.25rem .55rem;border-radius:5px;background:#1e293b;color:#94a3b8}
.diff.hard{background:#3b0a0a;color:#fb7185}
.diff.adv{background:#422006;color:#fbbf24}
.diff.med{background:#262e42;color:#60a5fa}
.block-label{font-size:.6rem;font-weight:700;letter-spacing:.6px;background:#1e293b;color:#7dd3fc;padding:.2rem .55rem;border-radius:5px;margin-left:auto}

.grid-cols-auto-fit{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.65rem}
.mcq-option{padding:.55rem .8rem;border:1px solid #374151;border-radius:12px;cursor:pointer;font-size:.85rem;background:#1e293b;user-select:none;transition:.25s}
.mcq-option:hover{border-color:#64748b;background:#233044}
.mcq-option.selected{border-color:#3b82f6;box-shadow:0 0 0 1px #3b82f6 inset;background:#1d3554}
.mcq-option.correct{border-color:#16a34a!important;background:#052e14!important}
.mcq-option.wrong{border-color:#dc2626!important;background:#3f0d12!important}
.locked .mcq-option{cursor:default}
.timer-badge{background:#1e293b;border:1px solid #334155;padding:.5rem .95rem;border-radius:999px;font-weight:600;font-size:.8rem;display:inline-flex;align-items:center;gap:.5rem}
.timer-running{color:#22d3ee}
.timer-stopped{color:#f87171}
.answer-key{background:#111827;border:1px solid #374151;border-radius:18px}
.summary-panel{background:#111827;border:1px solid #374151;border-radius:18px;padding:1rem 1.2rem}
.summary-metric{background:#1e293b;padding:.75rem .95rem;border-radius:14px;border:1px solid #334155;text-align:center}
.summary-metric h4{font-size:.7rem;text-transform:uppercase;letter-spacing:.7px;color:#94a3b8;margin-bottom:.4rem}
.summary-metric span{font-size:1.05rem;font-weight:700;color:#f1f5f9}

.bottom-submit-bar{margin-top:1.5rem;padding:1.05rem .95rem;background:#0f172a;border:1px solid #1e293b;border-radius:18px;display:flex;flex-wrap:wrap;gap:.9rem;align-items:center;justify-content:space-between}
.hint-text{font-size:.65rem;letter-spacing:.55px;text-transform:uppercase;color:#64748b;font-weight:600}

.fade{opacity:0;transform:translateY(14px);animation:fadeUp .65s ease forwards}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
@media(max-width:640px){
  .grid-cols-auto-fit{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
  h1{font-size:2.35rem}
}
</style>
</head>
<body>

<header class="text-center py-8 bg-gradient-to-r from-gray-900 via-gray-800 to-black text-white shadow-lg border-b border-gray-700">
  <h1 class="text-5xl md:text-6xl font-extrabold mb-3 drop-shadow-lg">Temperature, Heat &amp; Expansion</h1>
  <p class="text-lg md:text-xl italic text-gray-400 font-medium">Deep Dive â€¢ Practice â€¢ Mastery</p>
</header>

<nav class="section-anchor">
  <a href="#temperature">Temperature</a>
  <a href="#heat">Heat</a>
  <a href="#shc">Specific Heat</a>
  <a href="#water">Water</a>
  <a href="#expansion">Expansion</a>
  <a href="#difficulty">Difficulty</a>
  <a href="#conceptual">Conceptual (20)</a>
  <a href="#numericals">Numericals (20)</a>
  <a href="#mcqs">MCQs (20)</a>
  <a href="#mcq-summary">Summary</a>
  <a href="#keyfacts">Key Facts</a>
</nav>

<main class="max-w-6xl mx-auto p-8 md:p-10 space-y-12">

  <!-- Core content -->
  <section id="temperature" class="fade concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700">
    <h2 class="text-3xl font-bold text-blue-400 mb-5">ğŸŒ¡ï¸ Temperature</h2>
    <p>Temperature is a macroscopic indicator of the average random translational kinetic energy of microscopic particles. Scales: <mark>Celsius</mark>, <mark>Kelvin</mark> (absolute, SI), <mark>Fahrenheit</mark>. <strong class="text-yellow-400">Absolute zero</strong> (0 K) is the theoretical limit where classical particle motion becomes minimal (quantum zeroâ€‘point energy remains).</p>
  </section>

  <section id="heat" class="fade concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700">
    <h2 class="text-3xl font-bold text-red-400 mb-5">ğŸ”¥ Heat</h2>
    <p><mark>Heat (Q)</mark> is energy in transit across a boundary due solely to a temperature difference. Once transferred, it is internal energy. Modes: <strong class="text-red-300">Conduction</strong> (diffusion of energy via collisions & electrons), <strong class="text-red-300">Convection</strong> (bulk fluid motion), <strong class="text-red-300">Radiation</strong> (electromagnetic).</p>
  </section>

  <section id="shc" class="fade concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700">
    <h2 class="text-3xl font-bold text-green-400 mb-5">âš¡ Specific Heat Capacity</h2>
    <p>Specific heat capacity <mark>c</mark> is energy required per kilogram per kelvin: <span class="formula">Q = m c Î”T</span>. High c â†’ thermal buffering (water, concrete thermal mass). Low c â†’ rapid temperature swings (metals).</p>
  </section>

  <section id="water" class="fade concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700">
    <h2 class="text-3xl font-bold text-indigo-400 mb-5">ğŸ’§ Waterâ€™s Exceptionally High Specific Heat</h2>
    <p>Hydrogen bonding causes energy to disrupt structure before significantly raising average kinetic energy â†’ large c (â‰ˆ 4200 JÂ·kgâ»Â¹Â·Kâ»Â¹). Effects: climate regulation, biological homeostasis, moderated diurnal cycles, ocean heat storage.</p>
  </section>

  <section id="expansion" class="fade concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700">
    <h2 class="text-3xl font-bold text-yellow-400 mb-5">ğŸ“ Thermal Expansion</h2>
    <p>Dimensions change with T because mean interatomic spacing shifts. For modest Î”T: <span class="formula">Î”L = Î± Lâ‚€ Î”T</span>, area â‰ˆ 2Î±, volume â‰ˆ 3Î± (isotropic). Constraints â†’ thermal stress Ïƒ â‰ˆ E Î± Î”T.</p>
  </section>

  <section id="difficulty" class="fade concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700">
    <h2 class="text-3xl font-bold text-purple-400 mb-6">ğŸ“Š Difficulty Snapshot</h2>
    <div class="flex flex-wrap gap-4 text-sm">
      <span class="chip bg-green-600 px-5 py-2 rounded-xl text-white">Temperature: Easy</span>
      <span class="chip bg-yellow-600 px-5 py-2 rounded-xl text-white">Heat & Specific Heat: Moderate</span>
      <span class="chip bg-red-600 px-5 py-2 rounded-xl text-white">Expansion: Moderate â†’ Hard</span>
    </div>
  </section>

  <!-- Expanded Conceptual Questions -->
  <section id="conceptual" class="concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700 space-y-7">
    <div class="flex items-center gap-3">
      <h2 class="text-3xl font-bold text-sky-400">ğŸ§  Conceptual Questions (20 Expanded)</h2>
      <span class="badge-new">Expanded</span>
    </div>
    <p class="text-sm text-gray-300">Click each to reveal a clear, examâ€‘style explanation.</p>
    <div class="space-y-4">
      <!-- 1 -->
      <details class="q-block">
        <summary><span class="q-number">1.</span> Explain precisely why temperature reflects only the average translational kinetic energy and not the full internal energy of a substance that also includes rotational, vibrational, and potential contributions.</summary>
        <div class="answer">Temperature in classical thermodynamics links to the derivative of internal energy with respect to entropy at constant volume/particles. Translational degrees dominate direct kinetic exchange determining energy flow direction. Potential, vibrational, rotational parts contribute to internal energy but not all change proportionally with thermal exchange at every increment; temperature tracks the part that equilibrates through collisions (effective DOF weighted). Hence equal temperatures ensure no net kinetic exchange, even if potential energies differ.</div>
      </details>
      <!-- 2 -->
      <details class="q-block">
        <summary><span class="q-number">2.</span> Two equal blocks, one aluminum and one steel, are at the same temperature. Why can their internal energies differ and what does this reveal about â€œtemperature vs energyâ€?</summary>
        <div class="answer">Internal energy depends on microscopic structure, number and type of degrees of freedom, and heat capacity. Different materials have distinct c values, so equal Î”T corresponds to different Î”U. Same temperature means same average kinetic energy per active DOF, not same total stored energy. Thus temperature is not a direct measure of total internal energy magnitude.</div>
      </details>
      <!-- 3 -->
      <details class="q-block">
        <summary><span class="q-number">3.</span> A metal feels colder than a wooden table at the same ambient temperature. Provide a microscopic conduction explanation including thermal effusivity.</summary>
        <div class="answer">Metalâ€™s high conductivity and higher thermal effusivity (âˆš(kÏc)) let it draw energy rapidly from your warmer skin, lowering skin surface temperature and triggering â€œcoldâ€ sensation. Woodâ€™s low k reduces energy flux. Actual equilibrium temperatures are identical; perception is governed by transient heat flow rate, not steady temperature alone.</div>
      </details>
      <!-- 4 -->
      <details class="q-block">
        <summary><span class="q-number">4.</span> Distinguish heat, work, and internal energy with one example where all three appear in a single process.</summary>
        <div class="answer">In a piston cylinder heated externally: burner supplies thermal energy (heat Q) raising internal kinetic & potential energy (Î”U). Part of Î”U converts to boundary work W as gas expands pushing piston. Internal energy is a state function; heat and work are path-dependent process quantities transporting energy across the boundary.</div>
      </details>
      <!-- 5 -->
      <details class="q-block">
        <summary><span class="q-number">5.</span> Why does waterâ€™s high specific heat moderate coastal climates more effectively than land with lower specific heat?</summary>
        <div class="answer">Given Q = m c Î”T, for equal energy flux the Î”T of water is smaller because c is large and ocean effective mass is huge. Water absorbs daytime solar energy with modest warming and releases stored energy at night slowing cooling, flattening diurnal and seasonal temperature amplitudes near coasts.</div>
      </details>
      <!-- 6 -->
      <details class="q-block">
        <summary><span class="q-number">6.</span> Steam at 100â€¯Â°C causes more severe burns than liquid water at 100â€¯Â°C. Identify and quantify the principal added energy contribution.</summary>
        <div class="answer">Condensing steam releases latent heat of vaporization (~2.26 MJ/kg) on top of sensible heat exchange to body tissues. This latent release greatly exceeds sensible energy needed to cool an equal mass of liquid water a few degrees, intensifying tissue damage.</div>
      </details>
      <!-- 7 -->
      <details class="q-block">
        <summary><span class="q-number">7.</span> Articulate why civil structures (bridges, pipelines, rails) incorporate expansion joints and what physical failure mode they prevent.</summary>
        <div class="answer">Thermal expansion Î”L = Î±LÎ”T creates axial strain. If fully restrained, strain converts to stress Ïƒ â‰ˆ E Î± Î”T. Large seasonal Î”T can produce stresses above yield or induce buckling (â€œsun kinksâ€ in rails). Joints allow free expansion, dropping stress accumulation and preventing structural distortion or cracking.</div>
      </details>
      <!-- 8 -->
      <details class="q-block">
        <summary><span class="q-number">8.</span> Explain the bending of a bimetal strip in thermostats and state the direction of curvature when heated.</summary>
        <div class="answer">Two metals bonded with different coefficients Î±. On heating, highâ€‘Î± metal wants longer expansion. Bonding forces equal strain; mismatch causes curvature toward the metal with lower Î± (it becomes the inside of the curve) because the higherâ€‘Î± layer effectively elongates relative to it.</div>
      </details>
      <!-- 9 -->
      <details class="q-block">
        <summary><span class="q-number">9.</span> Derive the area and volume approximate expansion factors (2Î± and 3Î±) from the binomial expansion keeping terms up to first order.</summary>
        <div class="answer">Linear scale: each dimension multiplies by (1 + Î±Î”T). Area: (1+Î±Î”T)^2 â‰ˆ 1 + 2Î±Î”T + (Î±Î”T)^2. Neglect quadratic term â†’ 1+2Î±Î”T. Volume: (1+Î±Î”T)^3 â‰ˆ 1 + 3Î±Î”T + 3(Î±Î”T)^2 + (Î±Î”T)^3 â‰ˆ 1+3Î±Î”T. Higher order terms small when Î±Î”T â‰ª 1.</div>
      </details>
      <!-- 10 -->
      <details class="q-block">
        <summary><span class="q-number">10.</span> Why must Kelvin temperature be used in ideal gas proportional relationships (Charles, Gay-Lussac)?</summary>
        <div class="answer">Linear proportionality V âˆ T and P âˆ T derive from kinetic theory where average kinetic energy âˆ absolute temperature. Using Celsius introduces an offset; proportionality constants would shift and zero volume at âˆ’273.15â€¯Â°C matches theoretical limit only on Kelvin scale.</div>
      </details>
      <!-- 11 -->
      <details class="q-block">
        <summary><span class="q-number">11.</span> Provide a scenario where a â€œcoldâ€ object (0â€¯Â°C ice) supplies heat to a â€œcolderâ€ object (âˆ’10â€¯Â°C). What does this reveal about misconceptions?</summary>
        <div class="answer">Place ice at 0â€¯Â°C in contact with frozen material at âˆ’10â€¯Â°C. Heat flows from ice to colder material raising its temperature toward 0â€¯Â°C while some ice may freeze water film. Shows â€œcoldâ€ is relative; direction determined strictly by temperature gradient, not subjective feeling labels.</div>
      </details>
      <!-- 12 -->
      <details class="q-block">
        <summary><span class="q-number">12.</span> Distinguish thermal conductivity from specific heat in terms of transient vs steady processes.</summary>
        <div class="answer">Conductivity k governs rate of heat flux (Fourier q = -kâˆ‡T); it sets how quickly temperature gradients equilibrate. Specific heat c controls energy required for a given Î”T. A material can store much energy (high c) yet conduct slowly (low k) or vice versa (metals: high k, low c per mass).</div>
      </details>
      <!-- 13 -->
      <details class="q-block">
        <summary><span class="q-number">13.</span> Explain why linear expansion coefficients are treated constants only for â€œsmallâ€ temperature intervals.</summary>
        <div class="answer">Atomic potential wells are anharmonic; Î± itself varies with temperature as average amplitude increases. Over small Î”T, variation is minimal â†’ constant approximation. Larger intervals require integration Î±(T)dT for accuracy.</div>
      </details>
      <!-- 14 -->
      <details class="q-block">
        <summary><span class="q-number">14.</span> Describe the molecular reason water expands upon freezing and how this benefits aquatic ecosystems in winter.</summary>
        <div class="answer">Ice forms an open hexagonal lattice stabilized by directional hydrogen bonds, lowering density below that of liquid near 4â€¯Â°C. Ice floats, creating insulating layer, allowing liquid water beneath to remain near 4â€¯Â°C, preserving aquatic life.</div>
      </details>
      <!-- 15 -->
      <details class="q-block">
        <summary><span class="q-number">15.</span> Rapidly pouring boiling water into a thick glass sometimes cracks it. Identify stress source and mitigation design features.</summary>
        <div class="answer">Outer surface experiences sudden expansion while inner remains cool â†’ thermal gradient â†’ differential strain â†’ tensile stress exceeding fracture strength. Mitigation: use borosilicate glass (low Î±), gradual preheating, thinner walls to reduce gradients.</div>
      </details>
      <!-- 16 -->
      <details class="q-block">
        <summary><span class="q-number">16.</span> Differentiate specific heat capacity (c) and molar heat capacity (C<sub>m</sub>) and provide a case where molar comparison is more meaningful.</summary>
        <div class="answer">c = (1/m)(âˆ‚Q/âˆ‚T); C_m = (1/n)(âˆ‚Q/âˆ‚T). For gases, equipartition assigns energy per mole per DOF (â‰ˆÂ½R per translational/rotational DOF). Comparing monatomic vs diatomic gases: molar basis reveals degrees-of-freedom differences directly (e.g. C_v â‰ˆ (3/2)R vs (5/2)R).</div>
      </details>
      <!-- 17 -->
      <details class="q-block">
        <summary><span class="q-number">17.</span> Why do large bodies of water delay seasonal temperature extremes more than small ponds?</summary>
        <div class="answer">Thermal inertia âˆ m c. Larger volume â†’ greater energy required for same Î”T; heat exchange with atmosphere is limited by surface flux so timescale t ~ (ÏVcÎ”T)/(hAÎ”T) âˆ V/A (characteristic length). Big reservoirs have larger V/A ratios â†’ slower response.</div>
      </details>
      <!-- 18 -->
      <details class="q-block">
        <summary><span class="q-number">18.</span> Can two identical plates at the same temperature still radiatively exchange photons? Explain net vs gross exchange.</summary>
        <div class="answer">Yes each emits (ÏƒÏµTâ´) and absorbs from the other simultaneously; gross exchange occurs both ways. Net heat transfer = emission - absorption = 0 at equal T (steady state). Equilibrium is dynamic, not absence of microscopic processes.</div>
      </details>
      <!-- 19 -->
      <details class="q-block">
        <summary><span class="q-number">19.</span> Why is the volumetric expansion coefficient approximately thrice the linear for isotropic solids? Address limitations.</summary>
        <div class="answer">Volume scales as product of three orthogonal linear dimensions each scaling (1+Î±Î”T). First-order expansion gives (1+Î±Î”T)^3 â‰ˆ 1 + 3Î±Î”T. Breaks down when Î±Î”T not â‰ª 1 or anisotropy present (crystals with directional properties).</div>
      </details>
      <!-- 20 -->
      <details class="q-block">
        <summary><span class="q-number">20.</span> Give one experimental method to measure linear expansion coefficient and key sources of uncertainty.</summary>
        <div class="answer">Dilatometer: measure length change between two reference points while controlling temperature ramp. Uncertainties: temperature uniformity, contact thermal lag, reference gauge expansion, reading resolution, calibration drift.</div>
      </details>
    </div>
  </section>

  <!-- HARD NUMERICAL PROBLEMS (20 full) -->
  <section id="numericals" class="concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700 space-y-8">
    <div class="flex items-center gap-3">
      <h2 class="text-3xl font-bold text-emerald-400">ğŸ§® Hard Numerical Problems (20) â€“ Full Solutions</h2>
      <span class="badge-new">Complete</span>
    </div>
    <p class="text-sm text-gray-300">Constants (unless given): c<sub>w</sub>=4200, c<sub>ice</sub>=2100, c<sub>steam</sub>=2000, c<sub>Cu</sub>=385, c<sub>Al</sub>=900, c<sub>Fe/Steel</sub>=450 (JÂ·kgâ»Â¹Â·Kâ»Â¹); L<sub>f(ice)</sub>=334 kJÂ·kgâ»Â¹; L<sub>v(water)</sub>=2260 kJÂ·kgâ»Â¹; Î± (steel)=12Ã—10â»â¶, Î± (Al)=23Ã—10â»â¶, Î± (Brass)=19Ã—10â»â¶ Kâ»Â¹. Use g=9.8 if needed. Neglect losses unless indicated.</p>
    <div class="space-y-6">

      <!-- Problem 1 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">1.</span> (Composite Calorimetry) 0.40 kg copper at 180â€¯Â°C placed in 0.80 kg water at 15â€¯Â°C inside a 0.15 kg aluminum cup at 15â€¯Â°C (isolated). Determine equilibrium temperature.</summary>
        <div class="solution-steps text-sm">
          <h4>Solution</h4>
          <ol>
            <li>Energy balance: Heat lost (Cu) = Heat gained (water + cup).</li>
            <li>Equation: 0.40Â·385(180âˆ’T) = 0.80Â·4200(Tâˆ’15)+0.15Â·900(Tâˆ’15).</li>
            <li>Left: 154(180âˆ’T)=27,720âˆ’154T. Right factor: 0.80Â·4200 + 0.15Â·900 = 3,360 + 135 = 3,495.</li>
            <li>Right: 3,495(Tâˆ’15)=3,495Tâˆ’52,425.</li>
            <li>Balance: 27,720âˆ’154T = 3,495Tâˆ’52,425 â†’ 27,720+52,425 = 3,495T+154T â†’ 80,145 = 3,649T â†’ T = 21.96â€¯Â°C.</li>
          </ol>
          <div class="final-answer">T â‰ˆ 22.0â€¯Â°C</div>
        </div>
      </details>

      <!-- Problem 2 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">2.</span> (Full Phase Path) 0.25 kg ice at âˆ’10â€¯Â°C converted to steam at 110â€¯Â°C. Compute total heat.</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Segments: warm ice (âˆ’10â†’0), melt, heat water (0â†’100), vaporize, superheat steam (100â†’110).</li>
            <li>Qâ‚=0.25Â·2100Â·10=5,250 J.</li>
            <li>Qâ‚‚=0.25Â·334,000=83,500 J.</li>
            <li>Qâ‚ƒ=0.25Â·4200Â·100=105,000 J.</li>
            <li>Qâ‚„=0.25Â·2,260,000=565,000 J.</li>
            <li>Qâ‚…=0.25Â·2000Â·10=5,000 J.</li>
            <li>Total Q=763,750 J.</li>
          </ol>
          <div class="final-answer">Q â‰ˆ 7.64Ã—10âµ J</div>
        </div>
      </details>

      <!-- Problem 3 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">3.</span> (Sequential Mixing + Ice) 0.50 kg water at 80â€¯Â°C mixes with 0.50 kg at 20â€¯Â°C. Resulting 1.0 kg at 50â€¯Â°C then contacts 0.30 kg ice at 0â€¯Â°C. Final temperature?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Melt energy: 0.30Â·334,000=100,200 J.</li>
            <li>Let final T. Warm water cools: 1.0Â·4200(50âˆ’T). Melted ice warms: 0.30Â·4200(Tâˆ’0).</li>
            <li>Equation: 4200(50âˆ’T)=100,200 + 1,260T.</li>
            <li>210,000âˆ’4200T = 100,200 + 1,260T â†’ 109,800=5,460T â†’ T=20.11â€¯Â°C.</li>
          </ol>
          <div class="final-answer">T â‰ˆ 20.1â€¯Â°C</div>
        </div>
      </details>

      <!-- Problem 4 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">4.</span> (Two-Rod Expansion) Steel rod 4.000 m and aluminum rod 3.000 m at 20â€¯Â°C heated to 220â€¯Â°C. Total length increase?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Î”T=200 K.</li>
            <li>Steel: Î”Lâ‚=4.000Â·12Ã—10â»â¶Â·200=0.00960 m.</li>
            <li>Al: Î”Lâ‚‚=3.000Â·23Ã—10â»â¶Â·200=0.01380 m.</li>
            <li>Total Î”L=0.02340 m.</li>
          </ol>
          <div class="final-answer">Î”L â‰ˆ 23.4 mm</div>
        </div>
      </details>

      <!-- Problem 5 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">5.</span> (Qualitative Stress) A steel beam is rigidly fixed; temperature rises Î”T. Show elastic energy density âˆ (Î±Î”T)Â².</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Free expansion strain Îµ<sub>th</sub>=Î±Î”T suppressed â†’ mechanical strain Îµ=Î±Î”T.</li>
            <li>Energy density u=Â½EÎµÂ²=Â½E(Î±Î”T)Â².</li>
          </ol>
          <div class="final-answer">u âˆ E(Î±Î”T)Â²</div>
        </div>
      </details>

      <!-- Problem 6 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">6.</span> (Electric Heating) 2.0 kg water at 30â€¯Â°C supplied 150 kJ. Final temperature?</summary>
        <div class="solution-steps text-sm">
          <ol><li>Î”T=150,000/(2Â·4200)=17.86 K.</li><li>T=47.86â€¯Â°C.</li></ol>
          <div class="final-answer">â‰ˆ 48â€¯Â°C</div>
        </div>
      </details>

      <!-- Problem 7 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">7.</span> (Partial Melt) 0.50 kg ice at 0â€¯Â°C into 0.80 kg water at 40â€¯Â°C. Final state?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Water cooling to 0: Q=0.80Â·4200Â·40=134,400 J.</li>
            <li>Melt need: 0.50Â·334,000=167,000 J > available.</li>
            <li>Melted mass = 134,400/334,000=0.402 kg.</li>
          </ol>
          <div class="final-answer">T = 0â€¯Â°C; Ice left = 0.098 kg</div>
        </div>
      </details>

      <!-- Problem 8 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">8.</span> (Constant Power) 0.60 kg Al block at 25â€¯Â°C heated by 500 W for 5.0 min (no loss). Final temperature?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Q=500Â·300=150,000 J.</li>
            <li>Î”T=150,000/(0.6Â·900)=277.78 K.</li>
          </ol>
          <div class="final-answer">â‰ˆ 303â€¯Â°C</div>
        </div>
      </details>

      <!-- Problem 9 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">9.</span> (Metalâ€“Metal Exchange) 1.2 kg Cu at 200â€¯Â°C + 2.0 kg Al at 30â€¯Â°C isolated. Find equilibrium T.</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>1.2Â·385(200âˆ’T)=2.0Â·900(Tâˆ’30).</li>
            <li>462(200âˆ’T)=1800(Tâˆ’30) â†’ 92,400âˆ’462T=1800Tâˆ’54,000.</li>
            <li>146,400=2262T â†’ T=64.7â€¯Â°C.</li>
          </ol>
          <div class="final-answer">â‰ˆ 64.7â€¯Â°C</div>
        </div>
      </details>

      <!-- Problem 10 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">10.</span> (Overflow) Brass tank 0.0200 mÂ³ at 15â€¯Â°C filled with kerosene (Î²=960Ã—10â»â¶ Kâ»Â¹). Heated to 55â€¯Â°C. Brass Î²â‰ˆ57Ã—10â»â¶. Overflow volume?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Î”T=40 K.</li>
            <li>Liquid fraction: 960Ã—10â»â¶Â·40=0.0384.</li>
            <li>Tank fraction: 57Ã—10â»â¶Â·40=0.00228.</li>
            <li>Net fraction=0.03612 â†’ Î”V=0.0200Â·0.03612=7.224Ã—10â»â´ mÂ³.</li>
          </ol>
          <div class="final-answer">â‰ˆ 0.72 L</div>
        </div>
      </details>

      <!-- Problem 11 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">11.</span> (Combined Heat Capacity) 1 kg water + 3 kg granite (câ‰ˆ790) absorb 50 kJ uniformly. Temperature rise?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>C_total=1Â·4200 + 3Â·790=4200+2370=6570 J/K.</li>
            <li>Î”T=50,000/6570=7.61 K.</li>
          </ol>
          <div class="final-answer">Î”T â‰ˆ 7.6 K</div>
        </div>
      </details>

      <!-- Problem 12 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">12.</span> (Partial Vaporization) 0.60 kg water at 100â€¯Â°C receives 400 kJ. Mass vaporized?</summary>
        <div class="solution-steps text-sm">
          <ol><li>m=400,000 / 2,260,000=0.177 kg.</li></ol>
          <div class="final-answer">â‰ˆ 0.18 kg</div>
        </div>
      </details>

      <!-- Problem 13 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">13.</span> (Unknown Metal c) 0.25 kg metal at 150â€¯Â°C in 0.40 kg water at 25â€¯Â°C â†’ 32â€¯Â°C. Find c.</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>0.25 c (150âˆ’32)=0.40Â·4200(32âˆ’25)=11,760.</li>
            <li>0.25 cÂ·118=11,760 â†’ c=11,760/29.5=398 J/kgK.</li>
          </ol>
          <div class="final-answer">c â‰ˆ 4.0Ã—10Â² JÂ·kgâ»Â¹Â·Kâ»Â¹</div>
        </div>
      </details>

      <!-- Problem 14 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">14.</span> (Three-Body Exchange) 0.30 kg Al at 200â€¯Â°C, 0.20 kg Cu at 10â€¯Â°C, 0.50 kg water at 25â€¯Â°C. Equilibrium T?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>0.30Â·900(200âˆ’T)=0.20Â·385(Tâˆ’10)+0.50Â·4200(Tâˆ’25).</li>
            <li>270(200âˆ’T)=77(Tâˆ’10)+2100(Tâˆ’25).</li>
            <li>54,000âˆ’270T=77Tâˆ’770 + 2100Tâˆ’52,500 = 2177Tâˆ’53,270.</li>
            <li>107,270=2447T â†’ T=43.8â€¯Â°C.</li>
          </ol>
          <div class="final-answer">â‰ˆ 43.8â€¯Â°C</div>
        </div>
      </details>

      <!-- Problem 15 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">15.</span> (Effective Coefficient) Composite rod: 60% Al, 40% steel by length. Î±_eff?</summary>
        <div class="solution-steps text-sm">
          <ol><li>Î±_eff = 0.60Â·23Ã—10â»â¶ + 0.40Â·12Ã—10â»â¶ = 18.6Ã—10â»â¶ Kâ»Â¹.</li></ol>
          <div class="final-answer">Î±_eff â‰ˆ 18.6Ã—10â»â¶ Kâ»Â¹</div>
        </div>
      </details>

      <!-- Problem 16 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">16.</span> (Thermal Mass Equivalence) Granite (câ‰ˆ790). Mass needed to match storage of 10 kg water for Î”T=15â€¯K?</summary>
        <div class="solution-steps text-sm">
          <ol><li>m_gÂ·790Â·15 = 10Â·4200Â·15 â†’ m_g = 42,000 / 790 = 53.2 kg.</li></ol>
          <div class="final-answer">â‰ˆ 53 kg</div>
        </div>
      </details>

      <!-- Problem 17 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">17.</span> (Steam Cooling) 0.10 kg steam at 120â€¯Â°C condensed & cooled to 30â€¯Â°C water. Heat released?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Cool steam 120â†’100: 0.10Â·2000Â·20=4,000 J.</li>
            <li>Condense: 0.10Â·2,260,000=226,000 J.</li>
            <li>Cool water 100â†’30: 0.10Â·4200Â·70=29,400 J.</li>
            <li>Total=259,400 J.</li>
          </ol>
          <div class="final-answer">â‰ˆ 2.59Ã—10âµ J</div>
        </div>
      </details>

      <!-- Problem 18 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">18.</span> (Target Mixing) Mass of 90â€¯Â°C water required with 1.5 kg at 20â€¯Â°C to reach 45â€¯Â°C?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>mÂ·4200(90âˆ’45) = 1.5Â·4200(45âˆ’20).</li>
            <li>mÂ·4200Â·45 = 1.5Â·4200Â·25 â†’ m=37.5/45=0.833 kg.</li>
          </ol>
          <div class="final-answer">â‰ˆ 0.83 kg</div>
        </div>
      </details>

      <!-- Problem 19 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">19.</span> (Scaling) Steel beam expands 3.6 mm for Î”T=60 K. Find Î”T for 1.0 mm.</summary>
        <div class="solution-steps text-sm">
          <ol><li>Î”T âˆ Î”L â†’ Î”T = 60*(1.0/3.6)=16.67 K.</li></ol>
          <div class="final-answer">â‰ˆ 16.7 K</div>
        </div>
      </details>

      <!-- Problem 20 -->
      <details class="q-block">
        <summary class="problem-header"><span class="q-number">20.</span> (Block + Ice) 0.40 kg Al at 300â€¯Â°C added to 0.60 kg ice at âˆ’5â€¯Â°C. Final state?</summary>
        <div class="solution-steps text-sm">
          <ol>
            <li>Al cooling 300â†’0: Q=0.40Â·900Â·300=108,000 J.</li>
            <li>Warm ice to 0: 0.60Â·2100Â·5=6,300 J.</li>
            <li>Remaining for melt: 101,700 J.</li>
            <li>Melted: 101,700/334,000=0.304 kg; ice left 0.296 kg.</li>
          </ol>
          <div class="final-answer">Mixture at 0â€¯Â°C; 0.304 kg water + 0.296 kg ice</div>
        </div>
      </details>

    </div>
  </section>

  <!-- MCQ QUIZ -->
  <section id="mcqs" class="concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700 space-y-8">
    <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
      <div class="flex items-center gap-3">
        <h2 class="text-3xl font-bold text-pink-400">ğŸ“ MCQ Quiz (20)</h2>
        <span class="badge-new">Interactive</span>
      </div>
      <div class="flex items-center gap-3">
        <div id="quizTimer" class="timer-badge timer-stopped">
          <span>â±</span><span id="timeDisplay">00:00</span><span id="timerState">(stopped)</span>
        </div>
        <div class="flex gap-2 mcq-controls">
          <button id="startQuizBtn" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-sm">Start</button>
          <button id="submitQuizBtn" class="px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm" disabled>Submit</button>
          <button id="resetQuizBtn" class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white text-sm" disabled>Reset</button>
        </div>
      </div>
    </div>
    <p class="text-gray-300 text-sm">Start the quiz. Select answers. Use either Submit button (top or bottom). Timer halts on submission.</p>
    <ol id="mcqList" class="space-y-6 list-decimal ml-5"></ol>

    <div class="bottom-submit-bar">
      <div class="flex items-center gap-2">
        <button id="submitBottomBtn" class="px-5 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-semibold disabled:opacity-40 disabled:cursor-not-allowed" disabled>Submit Quiz (Bottom)</button>
        <span class="hint-text">Submit when ready</span>
      </div>
      <button id="scrollTopBtn" class="px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-500 text-white text-xs font-semibold">Top â†‘</button>
    </div>

    <div id="mcqAnswerKey" class="answer-key p-6 mt-4 hidden">
      <h3 class="font-semibold text-lg mb-3 text-sky-300">Answer Key</h3>
      <div id="keyGrid" class="grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm"></div>
    </div>
  </section>

  <!-- MCQ SUMMARY -->
  <section id="mcq-summary" class="concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700 space-y-6">
    <h2 class="text-2xl font-bold text-fuchsia-400">ğŸ“ˆ MCQ Performance Summary</h2>
    <p class="text-sm text-gray-300">Populates after submission.</p>
    <div class="grid md:grid-cols-4 gap-5">
      <div class="summary-metric"><h4>Attempted</h4><span id="sumAttempted">0</span></div>
      <div class="summary-metric"><h4>Correct</h4><span id="sumCorrect">0</span></div>
      <div class="summary-metric"><h4>Accuracy</h4><span id="sumAccuracy">0%</span></div>
      <div class="summary-metric"><h4>Time</h4><span id="sumTime">00:00</span></div>
    </div>
    <div class="summary-panel">
      <h3 class="font-semibold text-lg text-sky-400 mb-2">Topic Insight</h3>
      <p id="topicInsight" class="text-sm text-gray-300 italic">Finish the quiz to see weakest and strongest domains.</p>
    </div>
  </section>

  <!-- KEY FACTS -->
  <section id="keyfacts" class="concept-card bg-gray-900/95 p-8 rounded-3xl border border-gray-700 space-y-6">
    <div class="flex items-center gap-3">
      <h2 class="text-3xl font-bold text-teal-400">ğŸ“Œ High-Yield Key Facts</h2>
      <span class="badge-new">Review</span>
    </div>
    <ul class="list-disc ml-6 space-y-1 text-gray-200 text-sm">
      <li>Temperature âˆ average translational kinetic energy (ideal gas).</li>
      <li>Specific heat units JÂ·kgâ»Â¹Â·Kâ»Â¹; water â‰ˆ 4.2 kJÂ·kgâ»Â¹Â·Kâ»Â¹.</li>
      <li>Heat capacity C = m c (extensive).</li>
      <li>Latent heat: energy at constant T causing phase change.</li>
      <li>Steam burns severe: latent heat of condensation.</li>
      <li>Linear expansion: Î”L = Î±LÎ”T; area 2Î±; volume 3Î± (small Î”T).</li>
      <li>Water density maximum at 4â€¯Â°C â†’ ice floats.</li>
      <li>Radiation needs no medium; conduction & convection do.</li>
      <li>Ïƒ (constraint) â‰ˆ E Î± Î”T ; energy density Â½E(Î±Î”T)Â².</li>
      <li>Kelvin essential for gas proportionality laws.</li>
      <li>Thermal mass = m c controls temperature inertia.</li>
      <li>Composite Î± = Î£ (fraction_i Ã— Î±_i).</li>
      <li>Adiabatic: Q=0, so Î”U = âˆ’W (sign convention system does work).</li>
      <li>Dimension c: LÂ²Tâ»Â²Mâ»Â¹Kâ»Â¹ (from energy per mass per temperature).</li>
      <li>(1+Î±Î”T)^n first-order expansions justify 2Î± & 3Î± approximations.</li>
      <li>High effusivity materials feel colder (rapid heat draw from skin).</li>
      <li>Partial melting problems: check if available Q â‰¥ mL before mixing equations.</li>
      <li>Net radiative exchange zero at equal T though photons still exchanged.</li>
      <li>Thermal shock minimized with low Î± & gradual heating.</li>
      <li>Use energy segments for multi-step phase problems; keep a labeled table.</li>
    </ul>
  </section>
</main>

<footer class="text-center py-7 bg-gradient-to-r from-gray-900 via-gray-800 to-black text-gray-400 mt-14 border-t border-gray-700">
  <p class="font-semibold tracking-wide">&copy; 2025 Thermal Physics Learning Hub</p>
</footer>

<script>
/* Fade in */
const fades=document.querySelectorAll('.fade');
const obs=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){e.target.style.animationPlayState='running';obs.unobserve(e.target);}})},{threshold:0.1});
fades.forEach(el=>obs.observe(el));

/* MCQ Data (20 improved clarity) */
const mcqData=[
  {q:"Which microscopic quantity does temperature of an ideal monatomic gas directly scale with?",opts:["Total internal energy including potential","Average translational kinetic energy per molecule","Latent energy stored during phase change","Average potential energy of separation"],ans:1,topic:"Temperature"},
  {q:"Choose correct SI unit of specific heat capacity:",opts:["JÂ·kgÂ·K","JÂ·kgâ»Â¹Â·K","JÂ·kgâ»Â¹Â·Kâ»Â¹","JÂ·Kâ»Â¹"],ans:2,topic:"Specific Heat"},
  {q:"Energy transferred solely because of a temperature difference is called:",opts:["Work","Enthalpy","Heat","Entropy"],ans:2,topic:"Heat"},
  {q:"Thermal equilibrium between bodies implies:",opts:["Equal internal energies","Equal temperatures","Zero microscopic exchanges","Equal masses"],ans:1,topic:"Temperature"},
  {q:"Substance with largest standard specific heat among options:",opts:["Copper","Aluminum","Water","Steel"],ans:2,topic:"Specific Heat"},
  {q:"In Q = m c Î”T, which parameter is material property only?",opts:["m","c","Î”T","Q"],ans:1,topic:"Specific Heat"},
  {q:"Linear expansion coefficient Î± has dimension:",opts:["K","KÂ²","Kâ»Â¹","mÂ·K"],ans:2,topic:"Expansion"},
  {q:"At constant pressure, doubling absolute temperature of ideal gas does what to volume?",opts:["Halves it","Doubles it","Leaves unchanged","Makes zero"],ans:1,topic:"Heat"},
  {q:"Bridge expansion joints primarily reduce:",opts:["Aesthetic issues","Thermal stress buildup","Electrical resistance","Radiative losses"],ans:1,topic:"Expansion"},
  {q:"Approximate area expansion coefficient for isotropic solid:",opts:["Î±","2Î±","3Î±","Î±/2"],ans:1,topic:"Expansion"},
  {q:"Latent heat supplied to a pure substance at its melting point changes:",opts:["Temperature","Phase","Pressure only","Kinetic theory constants"],ans:1,topic:"Heat"},
  {q:"Waterâ€™s high specific heat results in:",opts:["Large rapid ocean temperature swings","Negligible climate influence","Moderation of coastal climate","Higher thermal conductivity"],ans:2,topic:"Specific Heat"},
  {q:"Heat capacity differs from specific heat because it is:",opts:["Independent of mass","Per unit mass","Extensive (whole object)","Dimensionless"],ans:2,topic:"Specific Heat"},
  {q:"Greatest risk of thermal shock occurs during:",opts:["Slow uniform heating","Slow cooling","Rapid uneven heating","Isothermal hold"],ans:2,topic:"Heat"},
  {q:"Set listing only heat transfer modes:",opts:["Conduction, convection, radiation","Conduction, fusion, radiation","Convection, boiling, radiation","Radiation, sublimation, conduction"],ans:0,topic:"Heat"},
  {q:"Ideal crystal at absolute zero has internal energy that is:",opts:["Infinite","Maximum","Minimum possible","Undefined"],ans:2,topic:"Temperature"},
  {q:"Adiabatic process (Q=0) for a closed system implies:",opts:["No temperature change","Î”U = âˆ’W","No energy conversion","Mass must decrease"],ans:1,topic:"Heat"},
  {q:"Dimensional form of specific heat c (base units):",opts:["LÂ²Tâ»Â²","LÂ²Tâ»Â²Kâ»Â¹","LÂ²Tâ»Â²Mâ»Â¹Kâ»Â¹","MLTâ»Â²"],ans:2,topic:"Specific Heat"},
  {q:"Volumetric expansion coefficient (approx.) equals:",opts:["Î±","2Î±","3Î±","Î±/3"],ans:2,topic:"Expansion"},
  {q:"Density anomaly near 4â€¯Â°C in water is primarily due to:",opts:["Hydrogen bonding open structure","High conductivity","Low latent heat","Magnetic ordering"],ans:0,topic:"Water"}
];

const mcqList=document.getElementById('mcqList');
mcqData.forEach((item,i)=>{
  const li=document.createElement('li');
  li.className='space-y-2';
  li.dataset.index=i;
  const stem=document.createElement('div');
  stem.className='font-medium';
  stem.textContent=item.q;
  const optsWrap=document.createElement('div');
  optsWrap.className='grid-cols-auto-fit';
  item.opts.forEach((opt,idx)=>{
    const d=document.createElement('div');
    d.className='mcq-option';
    d.textContent=String.fromCharCode(65+idx)+'. '+opt;
    d.dataset.choice=idx;
    d.addEventListener('click',()=>selectOption(li,d,idx));
    optsWrap.appendChild(d);
  });
  li.appendChild(stem);
  li.appendChild(optsWrap);
  mcqList.appendChild(li);
});

/* Quiz logic */
let quizStarted=false,quizFinished=false,startTime=null,timerInterval=null;
const startBtn=document.getElementById('startQuizBtn');
const submitBtn=document.getElementById('submitQuizBtn');
const submitBottomBtn=document.getElementById('submitBottomBtn');
const resetBtn=document.getElementById('resetQuizBtn');
const timeDisplay=document.getElementById('timeDisplay');
const timerState=document.getElementById('timerState');
const quizTimer=document.getElementById('quizTimer');
const answerKeyPanel=document.getElementById('mcqAnswerKey');
const keyGrid=document.getElementById('keyGrid');
const scrollTopBtn=document.getElementById('scrollTopBtn');

function pad(n){return n<10?'0'+n:n;}
function updateTimer(){
  if(!quizStarted||quizFinished)return;
  const elapsed=Math.floor((Date.now()-startTime)/1000);
  timeDisplay.textContent=pad(Math.floor(elapsed/60))+':'+pad(elapsed%60);
}
function startTimer(){
  startTime=Date.now();
  timerInterval=setInterval(updateTimer,500);
  timerState.textContent='(running)';
  quizTimer.classList.replace('timer-stopped','timer-running');
}
function stopTimer(){
  clearInterval(timerInterval);
  timerState.textContent='(stopped)';
  quizTimer.classList.replace('timer-running','timer-stopped');
}
function selectOption(li,optDiv,idx){
  if(!quizStarted||quizFinished)return;
  li.querySelectorAll('.mcq-option').forEach(o=>o.classList.remove('selected'));
  optDiv.classList.add('selected');
  li.dataset.selected=idx;
  const allAnswered=[...mcqList.children].every(c=>c.dataset.selected!==undefined);
  if(allAnswered){
    submitBtn.disabled=false;
    submitBottomBtn.disabled=false;
  }
}
function startQuiz(){
  if(quizStarted)return;
  quizStarted=true;quizFinished=false;
  startBtn.disabled=true;
  submitBtn.disabled=false;submitBottomBtn.disabled=false;
  resetBtn.disabled=false;
  startTimer();
}
function submitQuiz(){
  if(!quizStarted||quizFinished)return;
  quizFinished=true;
  stopTimer();
  gradeQuiz();
  submitBtn.disabled=true;
  submitBottomBtn.disabled=true;
  document.getElementById('mcq-summary').scrollIntoView({behavior:'smooth'});
}
function resetQuiz(){
  quizStarted=false;quizFinished=false;
  startBtn.disabled=false;
  submitBtn.disabled=true;submitBottomBtn.disabled=true;
  resetBtn.disabled=true;
  answerKeyPanel.classList.add('hidden');
  keyGrid.innerHTML='';
  [...mcqList.children].forEach(li=>{
    li.classList.remove('locked');
    delete li.dataset.selected;
    li.querySelectorAll('.mcq-option').forEach(o=>o.classList.remove('selected','correct','wrong'));
  });
  startTime=null;
  timeDisplay.textContent='00:00';
  timerState.textContent='(stopped)';
  quizTimer.classList.add('timer-stopped');
  updateSummary(0,0,'00:00');
  document.getElementById('topicInsight').textContent='Finish the quiz to see weakest and strongest domains.';
  window.scrollTo({top:document.getElementById('mcqs').offsetTop-60,behavior:'smooth'});
}
function gradeQuiz(){
  let attempted=0,correct=0;
  const topicStats={};
  [...mcqList.children].forEach(li=>{
    const i=parseInt(li.dataset.index);
    const data=mcqData[i];
    const sel=li.dataset.selected;
    const opts=li.querySelectorAll('.mcq-option');
    li.classList.add('locked');
    if(sel!==undefined){
      attempted++;
      const s=parseInt(sel);
      if(s===data.ans){correct++;opts[s].classList.add('correct');}
      else{opts[s].classList.add('wrong');opts[data.ans].classList.add('correct');}
      if(!topicStats[data.topic])topicStats[data.topic]={correct:0,total:0};
      topicStats[data.topic].total++;
      if(s===data.ans)topicStats[data.topic].correct++;
    } else {
      opts[data.ans].classList.add('correct');
      if(!topicStats[data.topic])topicStats[data.topic]={correct:0,total:0};
      topicStats[data.topic].total++;
    }
  });
  const elapsedSec=Math.floor((Date.now()-startTime)/1000);
  const timeStr=pad(Math.floor(elapsedSec/60))+':'+pad(elapsedSec%60);
  updateSummary(attempted,correct,timeStr);
  buildAnswerKey();
  buildTopicInsight(topicStats);
}
function updateSummary(a,c,timeStr){
  document.getElementById('sumAttempted').textContent=a;
  document.getElementById('sumCorrect').textContent=c;
  document.getElementById('sumAccuracy').textContent=a?((c/a)*100).toFixed(1)+'%':'0%';
  document.getElementById('sumTime').textContent=timeStr;
}
function buildAnswerKey(){
  keyGrid.innerHTML='';
  mcqData.forEach((q,i)=>{
    const d=document.createElement('div');
    d.textContent=(i+1)+': '+String.fromCharCode(65+q.ans);
    keyGrid.appendChild(d);
  });
  answerKeyPanel.classList.remove('hidden');
}
function buildTopicInsight(stats){
  const el=document.getElementById('topicInsight');
  const entries=Object.entries(stats).map(([topic,v])=>{
    const pct=v.total?(100*v.correct/v.total).toFixed(0):'0';
    return {topic,pct:parseInt(pct),label:`${topic} (${v.correct}/${v.total} = ${pct}%)`};
  }).sort((a,b)=>a.pct-b.pct);
  if(!entries.length){el.textContent='No data.';return;}
  el.innerHTML=`<span class="text-red-400 font-semibold">Weakest:</span> ${entries[0].label} &nbsp;|&nbsp; <span class="text-emerald-400 font-semibold">Strongest:</span> ${entries[entries.length-1].label}`;
}

/* Events */
startBtn.addEventListener('click',startQuiz);
submitBtn.addEventListener('click',submitQuiz);
submitBottomBtn.addEventListener('click',submitQuiz);
resetBtn.addEventListener('click',resetQuiz);
scrollTopBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));
</script>
</body>
</html>
